@{
    ViewData["Title"] = "Panel General del Sistema";
    Layout = "~/Views/Shared/_LayoutSidebar.cshtml";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="container mt-4">

    <h2 class="fw-bold text-primary mb-4">
        <i class="bi bi-speedometer2"></i> Panel General del Sistema
    </h2>

    <div class="row g-4">

       
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-people-fill text-primary icon"></i>
                <h5>Usuarios</h5>
                <h2>@ViewBag.TotalUsuarios</h2>
            </div>
        </div>

       
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-book-half text-success icon"></i>
                <h5>Libros</h5>
                <h2>@ViewBag.TotalLibros</h2>
            </div>
        </div>

       
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-collection text-warning icon"></i>
                <h5>Ejemplares</h5>
                <h2>@ViewBag.TotalEjemplares</h2>
            </div>
        </div>

      
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-bell-fill text-info icon"></i>
                <h5>Notificaciones</h5>
                <h2>@ViewBag.TotalNotificaciones</h2>
            </div>
        </div>

      
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-arrow-left-right text-danger icon"></i>
                <h5>Préstamos Totales</h5>
                <h2>@ViewBag.TotalPrestamos</h2>
            </div>
        </div>

       
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-check-circle-fill text-primary icon"></i>
                <h5>Activos</h5>
                <h2>@ViewBag.PrestamosActivos</h2>
            </div>
        </div>

      
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-arrow-return-left text-secondary icon"></i>
                <h5>Devueltos</h5>
                <h2>@ViewBag.PrestamosDevueltos</h2>
            </div>
        </div>

      
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-exclamation-octagon-fill text-danger icon"></i>
                <h5>Con Penalización</h5>
                <h2>@ViewBag.PrestamosConPenalizacion</h2>
            </div>
        </div>

       
        <div class="col-md-3">
            <div class="dashboard-card">
                <i class="bi bi-file-earmark-text-fill text-info icon"></i>
                <h5>Reportes</h5>
                <h2>@ViewBag.TotalReportes</h2>
            </div>
        </div>

    </div>

  
    <div class="row mt-5 g-4">


        <div class="col-md-6">
            <div class="chart-card">
                <h5 class="text-center fw-bold">Estado de los Préstamos</h5>
                <canvas id="prestamosChart"></canvas>
            </div>
        </div>

        
        <div class="col-md-6">
            <div class="chart-card">
                <h5 class="text-center fw-bold">Distribución del Sistema</h5>
                <canvas id="generalChart"></canvas>
            </div>
        </div>

    </div>

</div>

<style>
    .dashboard-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        transition: 0.2s;
    }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .dashboard-card .icon {
            font-size: 2.5rem;
        }

    .chart-card {
        padding: 25px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
</style>

<script>
   
    new Chart(document.getElementById('prestamosChart'), {
        type: 'doughnut',
        data: {
            labels: ['Activos', 'Devueltos', 'Con Penalización'],
            datasets: [{
                data: [
                    @ViewBag.PrestamosActivos,
                    @ViewBag.PrestamosDevueltos,
                    @ViewBag.PrestamosConPenalizacion
                ],
                backgroundColor: ['#28a745', '#007bff', '#dc3545']
            }]
        }
    });

   
    new Chart(document.getElementById('generalChart'), {
        type: 'bar',
        data: {
            labels: ['Usuarios', 'Libros', 'Ejemplares', 'Notificaciones', 'Préstamos', 'Reportes'],
            datasets: [{
                label: 'Total',
                data: [
                    @ViewBag.TotalUsuarios,
                    @ViewBag.TotalLibros,
                    @ViewBag.TotalEjemplares,
                    @ViewBag.TotalNotificaciones,
                    @ViewBag.TotalPrestamos,
                    @ViewBag.TotalReportes   
                ],
                backgroundColor: '#0d6efd'
            }]
        }
    });
</script>
